# corm (Go) â€” LLM/Agent Reference

This repository provides a lightweight ORM/query-builder for Go with MySQL and PostgreSQL support.

## What to read first

- AI/Agent usage guide: AI_AGENT_GUIDE.md
- English README: README.md
- Chinese README: README_CN.md

## Safe usage rules (must follow)

- Never concatenate untrusted input into SQL strings (Where/Join/Having/OrderBy).
- Always use placeholder args: `Where("id = ?", id)`.
- Never treat user input as identifiers (table/column names). Use constants or `TableName()`/`db` tags.

## Primary entrypoints

- Engine: `engine.Open`, `engine.WithDB`, `(*Engine).Transaction`
- Builders:
  - SELECT: `e.Select(...).From(...).Where(...).Limit(...).Offset(...).All/One`
  - INSERT: `e.Insert(\"...\").Model(&obj)` or `Columns(...).Values(...)`
  - UPDATE: `e.Update(\"...\").Model(&obj)` or `Set(...).Where(...)`
  - DELETE: `e.Delete(\"...\").Where(...)` (default requires WHERE; use `AllowEmptyWhere()` to override)
- SQL-only builder helper (no execution): `qb := builder.MySQL()` / `builder.Postgres()` then `qb.Select/Insert/Update/Delete(...).SQL()`
- Expressions: `clause.In`, `clause.And`, `clause.Or`, `clause.Raw`

## Scanning targets

- `[]Struct` / `[]*Struct`
- `Struct` / `*Struct`
- `[]map[string]any` and `map[string]any`

## Dialects

- MySQL: `?` placeholders
- Postgres: `$1,$2,...` placeholders
